const data ='Город просыпался, как всегда — с гудком машин, с треском рекламных экранов, с визгом тормозов на перекрёстках, с запахом кофе, вырывающегося из дверей закусочных, и выхлопов, въедающихся в одежду. Он шёл по тротуару, как шёл каждый день — быстро, не глядя по сторонам, не замечая лиц, не слыша голосов, не чувствуя ветра, который, казалось, давно перестал дуть здесь, заменённый потоками кондиционеров и вытяжек. Его шаги отсчитывали время, как метроном — ровно, чётко, без сбоев, без пауз, без смысла. Он не знал, когда в последний раз остановился просто так — не потому что светофор, не потому что толпа, не потому что опоздал — а потому что захотел. Потому что вдруг увидел. Потому что вдруг почувствовал. В его мире не было «вдруг». Всё было расписано — уведомления, встречи, задачи, сроки, цели, KPI, графики, отчёты, обновления, уведомления снова. Он жил в цикле, который вращался всё быстрее, но никуда не двигался. Он был как колесо в беличьей клетке — бежит, бежит, бежит, а вокруг всё тот же пейзаж из стекла, бетона и цифр. Он не помнил вкуса утреннего хлеба, не помнил, как пахнет дождь, не помнил, каково это — смотреть на облака и ничего не думать. Он не помнил себя. Однажды, в середине осени, когда небо было серым, как его рубашка, а воздух — влажным, как его усталость, он свернул не туда. Не потому что заблудился — он никогда не терялся, у него был GPS в телефоне, в наушниках, в голове. Он свернул потому что увидел дерево. Не аллею, не парк, не «зелёную зону по генплану» — а именно дерево. Одинокое, старое, с корой, потрескавшейся, как кожа старика, с ветвями, протянутыми к небу, как будто оно пыталось ухватиться за что-то, что давно улетело. Под ним лежали листья — не подметённые, не упакованные в мешки, не вывезенные на свалку — а просто лежали, как будто имели право быть там. Он остановился. Впервые за много лет — без причины. Просто стоял. Смотрел. Дышал. Ветер, оказывается, всё ещё дует. Он касался его щёк, играл с воротником, шептал что-то в ухо — тихо, нежно, почти забытое. Он закрыл глаза. И вдруг услышал — не музыку из наушников, не голос ассистента, не звонок коллеги — а пение птицы. Одной. Где-то высоко. Тонкое, хрупкое, как ниточка, связывающая его с чем-то, что он давно потерял. Он открыл глаза. Посмотрел на дерево. На листья. На небо. И вдруг понял — он не знает, как называется это дерево. Не знает, почему листья именно такого цвета. Не знает, какая птица поёт. Он знает, как работает нейросеть, как оптимизировать запросы к базе данных, как увеличить конверсию на 0.3%, но не знает, как называется дерево, под которым стоит. Это осознание ударило, как волна — тихо, но глубоко. Он достал телефон — не чтобы сделать фото, не чтобы глянуть время, не чтобы написать сообщение — а чтобы загуглить: «Какое дерево с такими листьями». И пока экран гас, пока пальцы замерли над клавиатурой, пока ветер снова коснулся его лица — он положил телефон в карман. Не потому что не хотел знать. А потому что вдруг захотел — не знать, а чувствовать. Не искать ответ, а быть с вопросом. Не фиксировать, а проживать. Он постоял ещё немного. Потом медленно пошёл — не к офису, не к метро, не по маршруту. Просто пошёл. Туда, где было тише. Туда, где пахло сыростью и землёй. Туда, где не было Wi-Fi. Он шёл долго. Прошёл мимо магазинов, мимо банкоматов, мимо рекламных баннеров, мимо людей, которые, как и он раньше, шли быстро, глядя в экраны. Он шёл, пока город не начал редеть, пока дома не стали ниже, пока асфальт не сменился гравием, а гравий — тропинкой. Он шёл, пока не вышел к реке. Маленькой, грязноватой, с плавающими бутылками и ржавыми банками — но настоящей. С течением. С запахом тины и рыбы. С камышами, шуршащими на ветру. Он сел на обломок бетона — когда-то, наверное, часть моста или плотины — и смотрел. На воду. На облака. На чаек, которые кружили над мусором, но всё равно были красивы. Он не думал о том, что делать дальше. Не планировал. Не анализировал. Не оценивал. Он просто был. И это было странно. И страшно. И прекрасно. Он не знал, сколько просидел так — час, два, целый день. Время перестало быть врагом, которого надо успеть обогнать. Оно стало пространством, в котором можно дышать. Когда солнце начало садиться, окрашивая воду в оранжево-розовые полосы, он встал. Не потому что надо. А потому что захотел. Он пошёл обратно — но уже не тем путём. Он шёл медленно. Смотрел на стены домов — не как на фасады, а как на холсты, на которых кто-то рисовал, писал, клеил, стирал, снова рисовал. Он видел кошек на подоконниках, бабушек на лавочках, детей, играющих в футбол мячом без камеры, без сенсоров, без приложения. Он видел жизнь — не как контент, не как метрику, не как повод для сторис — а как нечто настоящее, хрупкое, мимолётное, прекрасное. Дома он не включил компьютер. Не проверил почту. Не посмотрел новости. Он сварил чай — настоящий, в чайнике, с листьями, которые плавали и танцевали в кипятке. Он сел у окна. Посмотрел на улицу. И вдруг понял — он не знает, как называется дерево напротив. И это было нормально. Более того — это было чудесно. Потому что теперь у него было время узнать. Не через поиск. Не через приложение. А через наблюдение. Через ожидание. Через присутствие. Он стал замечать, как дерево меняется — с каждым днём, с каждым часом, с каждым порывом ветра. Он стал замечать птиц, которые садились на его ветви. Он стал замечать тени, которые оно рисовало на асфальте. Он стал замечать себя — в этих тенях, в этом свете, в этом тихом, медленном, настоящем времени. Он больше не бежал. Он шёл. Иногда — стоял. Иногда — сидел. Иногда — просто дышал. И этого было достаточно. Более чем достаточно. Это было — всё.'
function countChar(str, char) {
    return str.split(char).length - 1;
}

const areaElement = document.querySelector(".text-area");
const backgroundElement = document.querySelector(".background-area");
const highlightElement = document.querySelector(".highlight-area");

highlightElement.addEventListener("click",() =>{
    areaElement.focus()
})
const scrollHandSync = () =>{
    backgroundElement.scrollTop = highlightElement.scrollTop;
    areaElement.scrollTop = highlightElement.scrollTop;
}
const scrollAutoSync = () =>{
    backgroundElement.scrollTop = areaElement.scrollTop;
    highlightElement.scrollTop = areaElement.scrollTop;
}
areaElement.addEventListener("scroll", scrollAutoSync);
highlightElement.addEventListener("scroll", scrollHandSync);

function updateHighlight() {
    const userInput = areaElement.value;
    let html = '';
    const targetText = backgroundElement.value;
    for (let i = 0; i < userInput.length; i++) {
        if(i > 0) {
            if (userInput[i] === ' ' && userInput[i - 1] === ' ') {
                areaElement.value = areaElement.value.slice(0, -1);
                continue;
            }
        }
        if(userInput[i] === targetText[i]) {
            html += `<span style="color: green">${userInput[i]}</span>`;
        }
        else{
            html += `<span style="color: red">${targetText[i]}</span>`;
        }

        //    areaElement.value = areaElement.textContent.slice(0, i-1);
    }
    highlightElement.innerHTML = html;
    console.log(highlightElement.innerHTML);
   //`<span style="color: ${color};">${displayChar}</span>`;

}

areaElement.addEventListener("input", updateHighlight);